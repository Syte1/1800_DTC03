<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DeskBuddy|Notification Type</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Our CSS -->
    <link rel="stylesheet" href="./styles/my_style.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Firebase 8 CDNs-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
    </script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Link to the api keys for your firebase project -->

    <script src="scripts/firebaseAPI.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />
</head>

<body style="text-align: center;">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand text-dark bg" id="desk-buddy" href="#">Desk Buddy</a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                    <li class="nav-item">
                        <a class="nav-link active text-dark" aria-current="page" href="#">Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active text-dark" aria-current="page" href="#">Progress</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Settings
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item text-dark" href="#">Notifications</a></li>
                            <li><a class="dropdown-item text-dark" href="#">Sync your Calendar</a></li>
                            <li><a class="dropdown-item text-dark" href="#">Profile</a></li>
                            <li><a class="dropdown-item text-dark" href="#">How to Use</a></li>
                        </ul>
                    </li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>
    <h1 style="padding-top: 5%; padding-bottom: 5%; position: center">Types of Notification:</h1>
    <div
        style="border: 1px solid rgb(163, 163, 163); padding-top: 6vh; padding-bottom: 6vh; border-radius: 2%; background-color: lightgrey;">
        <h1 style="font-size: 15px; float: left; padding-left: 5vw;">Notifications On/Off Toggle</h1>

        <div class="form-check form-switch" style="width: 50px; margin: 0 2px; padding-left: 80%">
            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault"
                style="height: 30px; width: 65px;" name="toggle" value="off">
        </div>
    </div>

    <!-- Note to self: Learn and make bootstrap grid to orient radio buttons and corresponding labels-->
    
    <div class="container">
        <div class="row row-cols-4">
            <div class="col">
                <label class="form-check-label pt-5" for="inlineRadio1">
                    <span class="material-icons" style="font-size: 25px;">
                        volume_up
                        vibration
                    </span>
                </label>
            </div>
            <div class="col">
                <label class="form-check-label pt-5" for="inlineRadio2">
                    <span class="material-icons" style="font-size: 30px;">
                        volume_up
                    </span>
                </label>
            </div>
            <div class="col">
                <label class="form-check-label pt-5" for="inlineRadio3">
                    <span class="material-icons" style="font-size: 30px;">
                        vibration
                    </span>
                </label>
            </div>
            <div class="col">
                <label class="form-check-label pt-5" for="inlineRadio4">
                    <span class="material-icons" style="font-size: 30px;">
                        volume_off
                    </span>
                </label>
            </div>
            <div class="col">
                <label class="form-check-label p-3" for="inlineRadio1">Vibrate & Sound</label>
            </div>
            <div class="col">
                <label class="form-check-label p-3" for="inlineRadio2">Sound Only</label>
            </div>
            <div class="col">
                <label class="form-check-label p-3" for="inlineRadio3">Vibrate Only</label>
            </div>
            <div class="col">
                <label class="form-check-label p-3" for="inlineRadio4">Silent</label>
            </div>
            <div class="col">
                <input class="form-check-input p-3" type="radio" id="inlineRadio1" value="vibrate_sound" name="type" disabled>
            </div>
            <div class="col">
                <input class="form-check-input p-3" type="radio" id="inlineRadio2" value="sound" name="type" disabled>
            </div>
            <div class="col">
                <input class="form-check-input p-3" type="radio" id="inlineRadio3" value="vibrate" name="type" disabled>
            </div>
            <div class="col">
                <input class="form-check-input p-3" type="radio" id="inlineRadio4" value="silent" name="type" disabled>
            </div>
        </div>
    </div>

    <div style="padding-top: 100px; position: center">
        <button type="submit" class="btn btn-primary btn-lg active" onclick="saveUserInfo()"> Next </button>
    </div>

    <footer class="fixed-bottom navbar justify-content-evenly bg-dark">
        <button class="btn material-icons bg-dark">
            <a href="break-types.html" class="material-icons"
                style="color: whitesmoke; text-decoration: unset; font-size: 35px;">grade</a>
        </button>
        <button class="btn material-icons bg-dark">
            <a href="main.html" class="material-icons"
                style="color: whitesmoke; text-decoration: unset; font-size: 35px;">home</a>
        </button>
        <button class="btn material-icons bg-dark">
            <a href="main.html" class="material-icons"
                style="color: whitesmoke; text-decoration: unset; font-size: 35px;">arrow_back</a>
        </button>
    </footer>
</body>
<script>
    
    function saveUserInfo() {
        let NotificationType = document.querySelector('input[name="type"]:checked').value;

        if (document.querySelector('input[name="toggle"]:checked') != null) {
            var ToggleOnOff = document.querySelector('input[name="toggle"]:checked').value;
        } else {
            var ToggleOnOff = "off"
        }

        firebase.auth().onAuthStateChanged(user => {
            if (user) {
                var currentUser = db.collection("users").doc(user.uid)
                var userID = user.uid;
                //get the document for current user.
                currentUser.get()
                    .then(userDoc => {
                        //get user Email
                        var userEmail = userDoc.data().email;
                        // Start a new collection and add all data in it.
                        db.collection("Notifications").add({
                            NotificationType: NotificationType,
                            UserID: userID,
                            UserEmail: userEmail,
                            ToggleOnOff: ToggleOnOff
                        });
                    })
            } else {
                // No user is signed in.
                console.log("No user signed in");
            }
        });
    }
</script>

</html>